(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[12],{114:function(e,t){},129:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a(4),n=(a(9),a(114),a(1)),s=a.n(n),l=a(6),o=a(5),i=a(94),u=a(7),b=a(17),j=a(39),d=a.n(j),g=(a(103),a(2)),O=function(e){var t=e.label,a=e.name,c=e.value,r=e.type,n=e.options,s=e.onChange,l=e.error;return Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:a,className:"col-sm-3 control-label",children:t}),Object(g.jsxs)("div",{className:"col-sm-9",children:["select"===r?Object(g.jsxs)("select",{required:!0,value:c,onChange:s,name:a,autoComplete:"off",id:a,className:"form-control",children:[Object(g.jsxs)("option",{value:"",children:[" -- Select ",t," -- "]}),n.map((function(e){return Object(g.jsx)("option",{value:e.value,children:e.label},e.value)}))]}):Object(g.jsx)("input",{required:!0,className:"form-control",type:r,value:c,name:a,placeholder:t,autoComplete:"off",onChange:s,id:a}),l&&Object(g.jsx)("p",{className:"text-danger",children:l})," "]})]})},p=a(25),h=function(){var e=Object(b.c)((function(e){return e.catalogue})),t=e.factory_list,a=e.edit,r=e.catalogue_data,n=localStorage.getItem("users"),j=JSON.parse(n),h=Object(c.useState)([]),m=Object(u.a)(h,2),x=(m[0],m[1],Object(b.b)()),v=Object(c.useState)({}),f=Object(u.a)(v,2),y=f[0],N=f[1],_=function(){var e={};return w.lot||(e.lot="Lot is required."),w.invoice||(e.invoice="Invoice is required."),w.factory||(e.factory="Factory is required."),w.grade||(e.grade="Grade is required."),w.net_weight||(e.net_weight="Weight is required."),w.price||(e.price="Rate is required."),w.pkgs||(e.pkgs="Pkgs is required."),w.totalkg||(e.totalkg="Total is required."),w.warehouse||(e.warehouse="Warehouse is required."),w.category||(e.category="Category is required."),w.sale_no||(e.sale_no="Sale No is required."),w.sample_c||(e.sample_c="Sample is required."),w.gross_total||(e.gross_total="Gross Total is required."),e},C=Object(c.useState)({lot:"",invoice:"",factory:"",grade:"",net_weight:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:j.link_id,warehouse:"",category:"",sale_no:"",posted:j.username}),k=Object(u.a)(C,2),w=k[0],S=k[1],P=function(e){var t=e.target.name,a=e.target.value;"pkgs"===t?(S((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t,a))})),T(a)):"sample_c"===t?(S((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t,a))})),F(a)):S((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t,a))}))},F=function(e){console.log("888");var t=parseFloat(w.sample_c),a=parseFloat(w.gross_total)-t;S((function(e){return Object(i.a)(Object(i.a)({},e),{},{gross_total:a})}))},T=function(e){var t,a=parseFloat(w.net_weight),c=isNaN(a)?0:a*e;t="LEAF"===w.category?1.5:"DUST"===w.category?.8:.5;var r=c-t;console.log(t),S((function(e){return Object(i.a)(Object(i.a)({},e),{},{totalkg:c,sample_c:t,gross_total:r})}))},E=t.filter((function(e){return"WAREHOUSE"===e.type})),A=t.filter((function(e){return"FACTORY"===e.type})),q=function(){var e=Object(l.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=_(),!(Object.keys(a).length>0)){e.next=4;break}return N(a),e.abrupt("return");case 4:return t.preventDefault(),e.next=7,x(Object(p.e)(w));case 7:S({lot:"",invoice:"",factory:"",grade:"",net_weight:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:j.link_id,warehouse:"",category:"",sale_no:"",posted:j.username}),x(Object(p.c)()),d()({title:"Success",text:"Catalogue created successfully!!",icon:"success",timer:2500,button:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){x(Object(p.d)())}),[x]),Object(c.useEffect)((function(){a&&S(r[0])}),[a]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("section",{className:"col-lg-7 connectedSortable",children:Object(g.jsx)("div",{className:"box box-danger",children:Object(g.jsxs)("div",{className:"tab-content no-padding",children:[Object(g.jsx)("div",{className:"box-header header-custom",children:Object(g.jsx)("h3",{className:"box-title",children:"Account Info"})}),Object(g.jsx)("div",{className:"box-body form-horizontal",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-md-6",children:[Object(g.jsx)(O,{label:"Sale No",name:"sale_no",value:w.sale_no,type:"text",onChange:P,error:y.sale_no}),Object(g.jsx)(O,{label:"Lot",name:"lot",value:w.lot,type:"text",onChange:P,error:y.lot}),Object(g.jsx)(O,{label:"Invoice",name:"invoice",value:w.invoice,type:"text",onChange:P,error:y.invoice}),Object(g.jsx)(O,{label:"Category",name:"category",value:w.category,type:"select",options:[{value:"DUST",label:"DUST"},{value:"LEAF",label:"LEAF"},{value:"SUPPLIMENT",label:"SUPPLIMENT"}],onChange:P,error:y.category}),Object(g.jsx)(O,{label:"Factory",name:"factory",value:w.factory,type:"select",options:A.map((function(e){return{value:e.id,label:e.name}})),onChange:P,error:y.factory}),Object(g.jsx)(O,{label:"Grade",name:"grade",value:w.grade,type:"select",options:[{value:"BOP",label:"BOP"},{value:"GBOP",label:"GBOP"},{value:"GOF",label:"GOF"},{value:"OF",label:"OF"},{value:"FOF",label:"FOF"},{value:"PF",label:"PF"},{value:"RD",label:"RD"},{value:"DUST",label:"DUST"},{value:"CD",label:"CD"}],onChange:P,error:y.grade}),Object(g.jsx)(O,{label:"Weight/Bag",name:"net_weight",value:w.net_weight,type:"text",onChange:P,error:y.net_weight}),Object(g.jsx)(O,{label:"Pkgs",name:"pkgs",value:w.pkgs,type:"text",onChange:P,error:y.pkgs})]}),Object(g.jsxs)("div",{className:"col-md-6",children:[Object(g.jsx)(O,{label:"Total Kg",name:"totalkg",value:w.totalkg,type:"text",onChange:P,error:y.totalkg}),Object(g.jsx)(O,{label:"Sample Collect",name:"sample_c",value:w.sample_c,type:"text",onChange:P,error:y.sample_c}),Object(g.jsx)(O,{label:"Total After/Collect",name:"gross_total",value:w.gross_total,type:"text",onChange:P,error:y.gross_total}),Object(g.jsx)(O,{label:"Offer Price",name:"price",value:w.price,type:"text",onChange:P,error:y.price}),Object(g.jsx)(O,{label:"Warehouse",name:"warehouse",value:w.warehouse,type:"select",options:E.map((function(e){return{value:e.id,label:e.name}})),onChange:P,error:y.warehouse})]})]})}),Object(g.jsxs)("div",{className:"box-footer",children:[Object(g.jsx)("button",{type:"submit",className:"btn btn-danger",children:"Cancel"}),Object(g.jsx)("input",{type:"button",name:"save",className:"btn btn-success pull-right",defaultValue:a?"Update":"Save",id:"butsave",onClick:a?function(e){var t=_();Object.keys(t).length>0?N(t):a&&(e.preventDefault(),x(Object(p.g)(w)),d()({title:"Success",text:"Catalogue updated successfully!!",icon:"success",timer:2500,button:!1}),S({lot:"",invoice:"",factory:"",grade:"",net_weight:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:j.link_id,warehouse:"",category:"",sale_no:"",posted:j.username}),x(Object(p.c)()))}:q})]})]})})})})},m=a(116),x=function(e){e.id;var t=e.columns,a=e.data,c=Object(m.useTable)({columns:t,data:a,initialState:{pageIndex:0,pageSize:10}},m.useGlobalFilter,m.usePagination),r=c.getTableProps,n=c.getTableBodyProps,s=c.headerGroups,l=c.page,o=c.prepareRow,u=c.state,b=c.setGlobalFilter,j=c.nextPage,d=c.canNextPage,O=c.previousPage,p=c.canPreviousPage,h=c.pageOptions,x=c.setPageSize,v=u.globalFilter,f=u.pageIndex,y=u.pageSize;return Object(g.jsx)("div",{className:"datatable-con",children:Object(g.jsxs)("div",{className:"table-responsive",children:[Object(g.jsx)("div",{className:"pagination-container",children:Object(g.jsxs)("div",{className:"pagination-top",children:[Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("select",{value:y,onChange:function(e){x(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(g.jsx)("option",{value:e,children:e},e)}))})}),Object(g.jsx)("input",{type:"text",value:v||"",onChange:function(e){return b(e.target.value)},placeholder:"Search..."})]})}),Object(g.jsxs)("table",Object(i.a)(Object(i.a)({id:"data-table",className:"table table-striped table-bordered"},r()),{},{children:[Object(g.jsx)("thead",{children:s.map((function(e){return Object(g.jsx)("tr",Object(i.a)(Object(i.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(g.jsx)("th",Object(i.a)(Object(i.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(g.jsx)("tbody",Object(i.a)(Object(i.a)({},n()),{},{children:l.map((function(e){return o(e),Object(g.jsx)("tr",Object(i.a)(Object(i.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(g.jsx)("td",Object(i.a)(Object(i.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),Object(g.jsx)("div",{className:"pagination-container",children:Object(g.jsxs)("div",{className:"pagination-bottom",children:[Object(g.jsx)("button",{onClick:function(){return O()},disabled:!p,children:"Previous"}),Object(g.jsxs)("span",{children:["Page"," ",Object(g.jsxs)("strong",{children:[f+1," of ",h.length]})]}),Object(g.jsx)("button",{onClick:function(){return j()},disabled:!d,children:"Next"})]})})]})})},v=function(){var e=localStorage.getItem("users"),t=JSON.parse(e),a=Object(b.b)(),r=Object(b.c)((function(e){return e.catalogue})).catalogue_list,n=Object(c.useMemo)((function(){return r.filter((function(e){return e.brokers===t.link_id}))}),[r,t.link_id]),s=[{Header:"LOT",accessor:"lot"},{Header:"INVOICE",accessor:"invoice"},{Header:"FACTORY",accessor:"factory_name"},{Header:"GRADE",accessor:"grade"},{Header:"NET.W",accessor:"net_weight"},{Header:"PACKAGE",accessor:"pkgs"},{Header:"TOTAL",accessor:"totalkg"},{Header:"WAREHOUSE",accessor:"warehouse_name"},{Header:"CATEGORY",accessor:"category"},{Header:"ACTION",Cell:function(e){var t=e.row;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{onClick:function(){return a(Object(p.f)(t.original.id))},className:"btn btn-warning mr-2",children:"Edit"}),Object(g.jsx)("button",{onClick:function(){return e=t.original.id,void d()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this item!",icon:"warning",buttons:["Cancel","Delete"],dangerMode:!0}).then((function(t){t&&a(Object(p.b)(e)).then((function(){d()({title:"Success",text:"Item deleted successfully!",icon:"success",timer:2500,button:!1}),a(Object(p.c)())}))}));var e},className:"btn btn-danger mr-1",children:"Delete"})]})}}];return Object(c.useEffect)((function(){a(Object(p.c)())}),[]),Object(g.jsx)("section",{className:"col-lg-12 connectedSortable",children:Object(g.jsxs)("div",{className:"box box-primary",children:[Object(g.jsx)("div",{className:"box-header header-custom",children:Object(g.jsx)("div",{className:"row ",children:Object(g.jsx)("div",{className:"col-md-6 text-left",children:Object(g.jsx)("h3",{className:"box-title",children:"Detail Info"})})})}),Object(g.jsx)(x,{columns:s,data:n})]})})};t.default=function(){var e=Object(r.n)();return Object(c.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/catalogue":"/")}),[]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("section",{className:"content",children:Object(g.jsx)("div",{className:"row",children:Object(g.jsxs)("div",{className:"col-xs-12",children:[Object(g.jsx)(h,{}),Object(g.jsx)(v,{})]})})})})}}}]);
//# sourceMappingURL=12.ec680223.chunk.js.map