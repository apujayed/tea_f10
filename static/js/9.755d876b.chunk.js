(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[9],{124:function(e,t,c){},131:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(4),a=c(9),r=c.n(a),i=c(1),o=c.n(i),l=c(6),d=c(7),b=c(17),u=c(97),j=c(102),m=(c(27),c(128)),h=(c(124),c(2)),f=function(e){var t=Object(n.useState)(e.filteredData),c=Object(d.a)(t,2),s=(c[0],c[1],Object(n.useState)(!1)),a=Object(d.a)(s,2),r=(a[0],a[1],Object(n.useRef)(null)),i=function(t){27===(t.charCode||t.keyCode)&&e.onClose()};return Object(n.useEffect)((function(){return document.body.addEventListener("keydown",i),function(){document.body.removeEventListener("keydown",i)}}),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{nodeRef:r,in:e.show,unmountOnExit:!0,timeout:{enter:0,exit:300},children:Object(h.jsx)("div",{className:"modal",onClick:e.onClose,ref:r,children:Object(h.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("h4",{className:"modal-title",children:e.title})}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsxs)("table",{className:"modaltable table-bordered",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"#"}),Object(h.jsx)("th",{scope:"col",children:"Lot"}),Object(h.jsx)("th",{scope:"col",children:"Factory"}),Object(h.jsx)("th",{scope:"col",children:"Price"}),Object(h.jsx)("th",{scope:"col",children:"Bidder"}),Object(h.jsx)("th",{scope:"col",children:"Status"}),Object(h.jsx)("th",{scope:"col",children:"Action"})]})}),Object(h.jsx)("tbody",{children:e.filteredData.map((function(t,c){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{scope:"row",children:Object(h.jsx)("h4",{children:c+1})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.lot})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.factory_name})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.maximum_bid})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.buyer_name})}),Object(h.jsx)("td",{children:Object(h.jsx)("span",{className:1===t.sold_status?"hname":(t.sold_status,"rname"),children:1===t.sold_status?"Sold":2===t.sold_status?"Unsold":"Pending"})}),Object(h.jsxs)("td",{children:[Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,1)},className:"btn btn-success px-3",children:Object(h.jsx)("i",{className:"fas fa-check","aria-hidden":"true"})}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,2)},className:"btn btn-danger px-3",children:Object(h.jsx)("i",{className:"fas fa-times","aria-hidden":"true"})}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,0)},className:"btn btn-info px-3",children:Object(h.jsx)("i",{className:"fas fa-spinner","aria-hidden":"true"})})]})]},t.id)}))})]})}),Object(h.jsx)("div",{className:"modal-footer",children:Object(h.jsx)("button",{onClick:e.onClose,className:"btn btn-danger",children:"Close"})})]})})})})},O=c(109),x=c.n(O),p=c(103),v=c(45),N=c(46),g=function(e){var t=e.sl,c=e.el,n=e.users,s=e.handleSoldstatus,a=e.formatTime,r=e.time;e.index;return Object(h.jsx)("div",{className:"col-md-3 col-sm-12 col-xs-12 list",children:Object(h.jsxs)("div",{className:"card mb-4",children:[Object(h.jsxs)("div",{className:"badge",children:["Lot- ",c.lot]}),Object(h.jsxs)("div",{className:"red-digit",children:[" ",t]})," ",Object(h.jsxs)("div",{className:"card-body ",children:[Object(h.jsxs)("span",{className:"text-white bg-l px-2 py-1 rounded-pill animate__animated animate__flash animate__infinite",children:["Live ",a(r),Object(h.jsx)("span",{className:"dot"})]}),Object(h.jsxs)("div",{className:"mt-3 row",children:[Object(h.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 ",children:[Object(h.jsx)("h5",{className:"card-title",children:c.factory_name}),Object(h.jsxs)("p",{className:"card-text",children:["INV:",c.invoice," LOT:",c.lot]}),Object(h.jsxs)("p",{className:"card-text",children:["PRICE:",c.price," QTY:",c.pkgs]}),Object(h.jsxs)("p",{className:"card-text",children:["GRADE:",c.grade]}),Object(h.jsx)("div",{className:"card-sp",children:0===c.maximum_bid?Object(h.jsx)(h.Fragment,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h5",{className:"card-price",children:["Max.",c.maximum_bid]}),Object(h.jsxs)("span",{className:c.buyer===n.link_id?"hname":"rname",children:[c.buyer_name,"(",c.maximum_bid-c.price,")"]}),Object(h.jsx)("br",{})]})})]}),Object(h.jsx)("div",{className:"col-md-12 d-flex justify-content-center align-items-center col-sm-12 col-xs-12 b-bg",children:Object(h.jsxs)("div",{className:"cusrow",children:[Object(h.jsx)("button",{onClick:function(){return s(c,1)},disabled:c.brokers!==n.link_id,className:1===c.sold_status?"btn btn-success square-circle mr-4":(c.sold_status,"btn btn-warning square-circle mr-4"),children:Object(h.jsx)(N.b,{className:"bid"})}),Object(h.jsx)("button",{onClick:function(){return s(c,2)},disabled:c.brokers!==n.link_id,className:"btn btn-danger square-circle",children:Object(h.jsx)(N.c,{className:"bid"})})]})})]})]})]})})},y=j.a.connect("http://68.183.81.28:3009"),k=function(){Object(s.n)();var e=Object(n.useState)(!1),t=Object(d.a)(e,2),c=t[0],a=t[1],i="http://68.183.81.28:3009",j=Object(b.c)((function(e){return e.auction})).auction_data,m=localStorage.getItem("users"),O=JSON.parse(m),N=Object(n.useState)(""),k=Object(d.a)(N,2),w=k[0],S=k[1],_=Object(n.useState)(""),C=Object(d.a)(_,2),E=C[0],I=C[1],T=Object(n.useState)(),R=Object(d.a)(T,2),L=(R[0],R[1]),F=Object(n.useState)([]),V=Object(d.a)(F,2),A=V[0],P=V[1],D=Object(n.useState)([]),G=Object(d.a)(D,2),B=G[0],U=G[1],q=Object(n.useState)(0),J=Object(d.a)(q,2),M=J[0],K=J[1],z=Object(n.useState)(1),Q=Object(d.a)(z,2),W=Q[0],X=Q[1],Y=Object(n.useState)(0),H=Object(d.a)(Y,2),Z=H[0],$=H[1],ee=Object(n.useState)(!1),te=Object(d.a)(ee,2),ce=(te[0],te[1]),ne=Object(n.useState)(!0),se=Object(d.a)(ne,2),ae=(se[0],se[1]),re=Object(n.useState)(0),ie=Object(d.a)(re,2),oe=ie[0],le=ie[1],de=Object(n.useState)(!1),be=Object(d.a)(de,2),ue=be[0],je=be[1],me=Object(n.useState)(!1),he=Object(d.a)(me,2),fe=he[0],Oe=he[1],xe=Object(n.useState)(!1),pe=Object(d.a)(xe,2),ve=pe[0],Ne=pe[1],ge=Object(b.b)(),ye=function(){var e=Object(l.a)(o.a.mark((function e(t,c){var n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Oe(!0),n=t.id,s=c,e.next=6,r.a.put("".concat(i,"/updatesold"),{id:n,status:s});case 6:return e.next=8,r.a.get("".concat(i,"/getselectbroker"));case 8:a=e.sent,y.emit("user",a.data[0].current_brokers),Oe(!1),y.on("users",(function(e){P(e),U(e)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c){return e.apply(this,arguments)}}(),ke=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(i,"/getselectbroker"));case 3:t=e.sent,y.emit("user",t.data[0].current_brokers),a(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState){e.next=12;break}return e.prev=1,e.next=4,r.a.get("".concat(i,"/getselectbroker"));case 4:t=e.sent,c=t.data[0].auction,ae(0===c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=Object(n.useState)(!1),Ce=Object(d.a)(_e,2),Ee=(Ce[0],Ce[1]),Ie=function(){if(W+4<=A.length){var e=M+4,t=W+4;K(e),X(t),y.emit("updateIndexes",{startIndex:e,endIndex:t}),y.off("updateIndexes"),Ee(!0)}else Ve()},Te=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.post("".concat(i,"/startauc"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.post("".concat(i,"/stopauc"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,n,s,a,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(i,"/getselectbroker"));case 3:return t=e.sent,c=t.data[0],n=c.auction,s=c.current_brokers,a=c.name,l=c.id,ae(0===n),e.next=8,Promise.all([S(a),I(l),L(s)]);case 8:return y.emit("user",s),d=function(e){ce(e===O.link_id)},y.on("user_toggle",d),e.abrupt("return",(function(){y.off("users",s),y.off("user_toggle",d)}));case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=!0,t=function(){je(!0)},c=function(){je(!1)},n=function(e){le(e)},s=Object(p.throttle)(we,1e3);return y.on("visibility",s),y.on("start",t),y.on("stop",c),y.on("time",n),Le(),y.on("users",(function(t){if(e){t.filter((function(e){return 0===e.sold_status}));P(t),U(t)}})),y.on("checkname",(function(t){e&&S(t)})),function(){e=!1,y.off("users"),y.off("checkname"),y.off("visibility",s),y.off("start",t),y.off("stop",c),y.off("time",n)}}),[y]),Object(n.useEffect)((function(){var e;return ue?function t(){y.emit("tick"),e=setTimeout(t,1e3)}():clearTimeout(e),function(){return clearTimeout(e)}}),[ue]),Object(n.useEffect)((function(){ge(Object(v.b)());var e=function(e){ae(e),localStorage.setItem("isVisible",e)},t=function(){je(!0)},c=function(){je(!1)},n=function(e){le(e)},s=function(e){$(e)},a=function(e){K(e)},r=function(e){X(e)};return y.on("visibility",e),y.on("start",t),y.on("stop",c),y.on("time",n),y.on("activeUsers",s),y.on("startIndex",a),y.on("endIndex",r),y.emit("getObjects"),document.addEventListener("visibilitychange",Se),function(){!1,document.removeEventListener("visibilitychange",Se),y.off("visibility",e),y.off("start",t),y.off("stop",c),y.off("time",n),y.off("activeUsers",s),y.off("startIndex",a),y.off("endIndex",r),y.off("getObjects")}}),[]);Math.floor(M/4);var Fe=Object(p.throttle)(Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne(!0),e.next=3,Te();case 3:ae(!1),y.emit("visibility",!1),y.once("play-sound",(function(){new Audio(u.a).play()})),y.emit("start"),Ne(!1),t=function e(){Ie(),y.off("countdownEnd",e)},y.on("countdownEnd",t),Ee(!0);case 11:case"end":return e.stop()}}),e)}))),1e3),Ve=function(){Ae()},Ae=Object(p.throttle)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re();case 2:ae(!0),y.emit("visibility",!0),y.emit("stop");case 5:case"end":return e.stop()}}),e)}))),1e3),Pe=function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),c=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(c)},De=B.filter((function(e){return e.brokers===E&&0!=e.buyer}));return Object(h.jsxs)(h.Fragment,{children:[fe?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"overlay",children:Object(h.jsxs)("div",{className:"spinner-container",children:[Object(h.jsx)("div",{className:"spinner"}),Object(h.jsx)("span",{children:"Verifying data..."})]})})}):"",B[0]?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{title:"Brokers Lot",onClose:function(){return a(!1)},show:c,filteredData:De,onV:ye}),Object(h.jsxs)("div",{className:"section-head sec-h",children:[Object(h.jsxs)("p",{className:"br-n",children:["=",w,"="]}),Object(h.jsxs)("div",{className:"row newc",children:[Object(h.jsxs)("div",{className:"col-7 col-md-9 card-btn leftCard",children:[Object(h.jsxs)("h2",{children:["Auction Date:"," ",0===j.length?"":j[0].date," "]}),Object(h.jsxs)("p",{children:["SALE NO - #",0===j.length?"":j[0].sale_no," ",Z," "]}),Object(h.jsxs)("p",{children:["Season - #",0===j.length?"":j[0].season," "]}),Object(h.jsxs)("p",{children:["CURRENT BROKER :"," ",Object(h.jsx)("span",{className:"c_brokers",children:w})," "]}),Object(h.jsx)("div",{className:" row margin-left",children:"BROKERS"===O.type?Object(h.jsx)("button",{type:"button",onClick:ke,className:"col-5  buttonGroup btn btn-danger my-btn",children:"All"}):""})]}),Object(h.jsxs)("div",{className:"col-5 col-md-3 align-items-center justify-content-center mt-5 rCard",children:[Object(h.jsxs)("div",{className:"bflex card-btn rightButton",children:[Object(h.jsxs)("div",{className:"button-row",children:[Object(h.jsx)("button",{disabled:ve,type:"button",onClick:function(){Fe()},className:"buttonGroup btn btn-primary my-btn",children:"START"}),Object(h.jsx)("button",{type:"button",onClick:Ve,className:"buttonGroup btn btn-danger my-btn",children:"STOP"})]}),Object(h.jsxs)("div",{className:"button-row",children:[Object(h.jsx)("button",{type:"button",onClick:function(){if(M-4>=0){console.log(M,W);var e=M-4,t=W-4;K(e),X(t),y.emit("updateIndexes",{startIndex:e,endIndex:t}),y.off("updateIndexes"),Ee(!0)}else Ve()},className:"buttonGroup btn btn-success my-btn",children:"PREV"}),Object(h.jsx)("button",{type:"button",onClick:Ie,className:"buttonGroup btn btn-success my-btn",children:"NEXT"})]})]}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"row rightCard",children:Object(h.jsxs)("div",{className:" ",children:[Object(h.jsx)("div",{className:"col-md-6 count-t",children:Object(h.jsx)("h2",{className:"text-center mh2",children:Pe(oe)})}),Object(h.jsx)("div",{className:"col-md-6 name-t",children:Object(h.jsx)("h2",{className:"mh2 text-center",children:O.short_name})})]})})})})]})]})]}),Object(h.jsxs)("h2",{className:"text-center p-h",children:["-=",O.type," PANEL=-"]}),Object(h.jsx)("hr",{className:"hr-h"}),Object(h.jsx)("div",{className:"con",children:Object(h.jsx)("div",{className:"row g-1",children:A.slice(M,W+3).map((function(e,t){return Object(h.jsx)(g,{sl:M+t+1,el:e,users:O,handleSoldstatus:ye,formatTime:Pe,time:oe},e.id+9)}))})})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)(x.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(h.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"Verifying Data..."})]})})]})};t.default=function(){var e=Object(s.n)();return Object(n.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/auction":"/")}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("section",{className:"content-header"}),Object(h.jsx)("section",{className:"content",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-xs-12",children:Object(h.jsx)(k,{})})})})]})}},97:function(e,t,c){"use strict";t.a=c.p+"static/media/message.17f316c9.mp3"}}]);
//# sourceMappingURL=9.755d876b.chunk.js.map